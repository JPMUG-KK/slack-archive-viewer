(this["webpackJsonpslack-archive-viewer"]=this["webpackJsonpslack-archive-viewer"]||[]).push([[0],{128:function(e,t,n){},155:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(14),o=n.n(r),i=(n(128),n(21)),s=n(34),l=n(8),d=n(13),u=n(197),p=n(18),f=n(27),b=n(201),h=n(215),j=n(199),m=n(1),x=Object(u.a)((function(e){return{root:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh","& a":{color:"#1164A3",textDecoration:"none"}},input:{display:"none"},container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:24},commandTitle:{display:"flex",justifyContent:"space-between",marginBottom:4,"& span":{cursor:"pointer"}},code:{maxWidth:480,overflowX:"auto",display:"block",backgroundColor:"#2c3e50",color:"#fff",padding:8,borderRadius:8,position:"relative"},loading:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center"}}}));function g(e){var t=e.changeSlackData,n=e.isCors,a=e.initComplete,r=x(),o=c.a.useState([{type:"Windows OS",line:'[PATH_TO_CHROME]chrome.exe" --disable-web-security --disable-gpu --user-data-dir=~/chromeTemp',isCopy:!1},{type:"Mac OS",line:'open -n -a /Applications/Google Chrome.app/Contents/MacOS/Google Chrome --args --user-data-dir="/tmp/chrome_dev_test" --disable-web-security',isCopy:!1}]),i=Object(d.a)(o,2),s=i[0],u=i[1],p=function(e){return function(t){window.navigator.clipboard.writeText(s.find((function(t){return t.type===e})).line).then((function(){console.log("Command copied to clipboard"),u(s.map((function(t){return Object(l.a)(Object(l.a)({},t),{},{isCopy:t.type===e})}))),setTimeout((function(){u(s.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{isCopy:!1})})))}),1e3)})).catch((function(e){console.log("Something went wrong",e)}))}};return a?Object(m.jsxs)("div",{className:r.root,children:[Object(m.jsx)("input",{accept:"application/zip, application/octet-stream, application/x-zip-compressed, multipart/x-zip",className:r.input,id:"contained-button-file",multiple:!0,type:"file",onChange:function(e){Object(f.e)(e,t)}}),Object(m.jsxs)("div",{className:r.container,children:[Object(m.jsx)("label",{htmlFor:"contained-button-file",children:Object(m.jsx)(b.a,{variant:"contained",size:"large",color:"primary",component:"span",startIcon:Object(m.jsx)("i",{className:"fas fa-file-import",style:{fontSize:14}}),children:"Import Slack zip file"})}),n?Object(m.jsxs)(h.a,{severity:"warning",children:[Object(m.jsx)("strong",{children:"Cross-Origin Resource Sharing error"}),Object(m.jsx)("p",{children:"If you want to store images and files in the database, you need to avoid CORS errors."}),Object(m.jsxs)("ol",{type:"a",children:[Object(m.jsxs)("li",{children:[Object(m.jsx)("p",{children:Object(m.jsx)("strong",{children:"Launch browser with CORS error disabled"})}),Object(m.jsx)("p",{children:"Execute the following command in the terminal"}),Object(m.jsx)("pre",{children:s.map((function(e){var t=e.type,n=e.line,a=e.isCopy;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("p",{className:r.commandTitle,children:[t," : ",Object(m.jsxs)("span",{onClick:p(t),children:[Object(m.jsx)("i",{className:"fas fa-clipboard-list"})," ",a?"copied":"copy"]})]}),Object(m.jsx)("code",{className:r.code,children:n})]})}))})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("p",{children:Object(m.jsx)("strong",{children:"Disable with browser add-ons"})}),Object(m.jsxs)("a",{href:"https://chrome.google.com/webstore/detail/cors-unblock/lfhmikememgdcahcdlaciloancbhjino?hl=en",target:"_blank",rel:"noopener noreferrer",children:["CORS Unblock ",Object(m.jsx)("i",{className:"fas fa-external-link-alt"})]})]})]})]}):null]})]}):Object(m.jsx)("div",{className:r.loading,children:Object(m.jsx)(j.a,{})})}var v=n(82),O=n(205),y=n(156),w=n(209),k=n(203),S=n(77),I=n.n(S),N=n(217),C=n(213),T=n(206),B=n(208),L=n(104),z=n.n(L),D=n(207),W=Object(u.a)((function(e){return{root:{flex:1,display:"flex"},button:{color:"rgba(255,255,255,0.75)",flex:1,justifyContent:"space-between",alignItems:"center",gap:8},selectedLabel:{flex:1,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:82,textAlign:"left"},MenuPaper:{minWidth:240},Divider:{margin:"12px 0"},ListItemIcon:{minWidth:24}}}));function R(e){var t,n=W(),a=e.options,r=void 0===a?[]:a,o=e.moveImportPage,i=e.onChange,s=c.a.useState(null),l=Object(d.a)(s,2),u=l[0],p=l[1],f=function(){p(null)},h=(null===(t=r.find((function(e){return e.selected})))||void 0===t?void 0:t.label)||"unselected";return Object(m.jsxs)("div",{className:n.root,children:[Object(m.jsxs)(b.a,{className:n.button,size:"small","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){p(e.currentTarget)},children:[Object(m.jsx)("div",{className:n.selectedLabel,children:h}),Object(m.jsx)(z.a,{})]}),Object(m.jsxs)(C.a,{id:"workspace-menu",anchorEl:u,keepMounted:!0,open:Boolean(u),onClose:f,classes:{paper:n.MenuPaper},children:[r.map((function(e,t){return Object(m.jsx)(T.a,{selected:e.selected,onClick:(n=e.label,function(){i(n),f()}),children:e.label});var n})),Object(m.jsx)(D.a,{className:n.Divider}),Object(m.jsxs)(T.a,{onClick:o,children:[Object(m.jsx)(B.a,{className:n.ListItemIcon,children:Object(m.jsx)("i",{className:"fas fa-file-import",style:{fontSize:14}})}),"Import"]})]})]})}var _=Object(u.a)((function(e){return{root:function(e){return{backgroundColor:"#3f0f40",minWidth:e.menuWidth,maxWidth:e.menuWidth,overflow:"hidden"}},name:{flex:1,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},list:{height:"calc(100vh - (73px))",overflowY:"auto","&::-webkit-scrollbar-thumb":{background:"rgba(255,255,255,0.25)"}},listTitle:{padding:"8px 12px",color:"rgba(255, 255, 255, 0.75)",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"solid 1px rgba(255,255,255,0.15)",gap:8,minHeight:35},ListItemRoot:{color:"rgba(255, 255, 255, 0.75)"},ListItemText:{"& .MuiListItemText-primary":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},ListItemSelected:{backgroundColor:"#1263a3 !important",color:"rgba(255, 255, 255, 0.95)"},searchLabel:{display:"flex",alignItems:"center"},searchIcon:{fontSize:14,marginRight:8},importDbButton:{backgroundColor:"rgba(255, 255, 255, 0.75)",padding:8,"&:hover":{backgroundColor:"rgba(255, 255, 255, 1)"}},iconCoverBox:{width:16,height:16,display:"flex",justifyContent:"center",alignItems:"center",fontSize:16,color:"#3f0f40"},tooltip:{fontSize:13},CircularProgress:{color:"rgba(255, 255, 255, 0.75)"}}}));function E(e){var t=e.slackData,n=e.currentWorkSpaces,a=e.searchValue,r=e.moveImportPage,o=e.changeWorkSpace,i=e.menuWidth,s=void 0===i?240:i,u=e.menuId,b=Object(p.i)(),h=b.workSpace,x=b.appType,g=b.channelId,S=void 0===g?null:g,C=c.a.useState(!1),T=Object(d.a)(C,2),B=T[0],L=T[1],z=_({menuWidth:s}),D=Object(p.g)(),W=function(e,t){return function(){var n="/".concat(h,"/").concat(e,"/").concat(t);"search"===e&&(n="/".concat(h,"/").concat(e,"/messages/").concat(t)),D.push(n)}},E=t.setting.channels.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{selected:e.id===S})})),M=Object.keys(n).map((function(e){return{label:e,value:e,selected:e===t.workSpace}})),P=function(e){var t=e.filter((function(e){return e.successfulToSave})).length,n=e.length-t,a="".concat(t.toLocaleString()," data imports were successfully completed \ud83d\ude09");n&&(a+="\n            & There are ".concat(n.toLocaleString()," files that failed to import...(Perhaps the data was deleted from the slack server)\ud83e\udd72")),alert(a),L(!1)};return Object(m.jsxs)("div",{id:u,className:z.root,children:[Object(m.jsxs)(v.a,{className:z.listTitle,component:"div",children:[Object(m.jsx)(N.a,{title:t.workSpace,classes:{tooltip:z.tooltip},arrow:!0,children:Object(m.jsx)(R,{options:M,moveImportPage:r,onChange:o})}),Object(m.jsx)(N.a,{title:"Import images and files into the database",classes:{tooltip:z.tooltip},arrow:!0,children:Object(m.jsx)(k.a,{disabled:B,className:z.importDbButton,onClick:function(){L(!0),Object(f.d)(t,P)},children:B?Object(m.jsx)(j.a,{size:16,className:z.CircularProgress}):Object(m.jsx)("div",{className:z.iconCoverBox,children:Object(m.jsx)("i",{className:"fas fa-database"})})})})]}),Object(m.jsxs)(O.a,{className:z.list,dense:!0,component:"nav","aria-label":"main mailbox folders",children:[E.map((function(e){var t=e.id,n=e.name,a=e.selected;return Object(m.jsx)(y.a,{classes:{selected:z.ListItemSelected,root:z.ListItemRoot},selected:a,onClick:W("log",t),button:!0,children:Object(m.jsx)(w.a,{className:z.ListItemText,primary:"# ".concat(n)})},t)})),Object(m.jsx)(y.a,{style:{position:"sticky",bottom:-7,zIndex:1,backgroundColor:"#3f0f40",borderTop:"solid 1px rgba(255,255,255,0.1)"},classes:{selected:z.ListItemSelected,root:z.ListItemRoot},selected:"search"===x,onClick:W("search",a),button:!0,children:Object(m.jsx)(w.a,{primary:Object(m.jsxs)("div",{className:z.searchLabel,children:[Object(m.jsx)(I.a,{className:z.searchIcon})," Search"]})})})]})]})}var M=n(5),P=n(35),F=n(210),U=n(218),Y=n.p+"static/media/bot.a53baa28.png",H=Object(u.a)((function(e){return{}}));function V(e){H();var t=c.a.useState(null),n=Object(d.a)(t,2),a=n[0],r=n[1],o=e.users,l=void 0===o?[]:o,u=e.id,p=e.size,b=void 0===p?48:p,h=24===b?24:null;return c.a.useEffect((function(){Object(s.a)(Object(i.a)().mark((function e(){var t,n,a,c,o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.find((function(e){return e.id===u}))||{},n=t.profile,a=void 0===n?null:n,null!==u){e.next=5;break}e.t0={data:Y},e.next=8;break;case 5:return e.next=7,Object(f.b)("".concat(u,"-image_").concat(b));case 7:e.t0=e.sent;case 8:c=e.t0,o=(null===c||void 0===c?void 0:c.data)||a["image_".concat(b)],r(o);case 11:case"end":return e.stop()}}),e)})))()}),[u]),Object(m.jsx)(F.a,{style:{paddingTop:h?null:8,minWidth:h},children:Object(m.jsx)(U.a,{style:{width:h,height:h},variant:"rounded",alt:"",src:a})})}var A=n(107),X=n.n(A),q=Object(u.a)((function(e){return{attachmentImage:{maxWidth:360,maxHeight:240,borderRadius:4},fileBox:{display:"flex",alignItems:"center",textDecoration:"none",color:"#34495e",border:"solid 1px #ddd",borderRadius:4,padding:8,paddingRight:12,marginTop:4}}}));function $(e){var t=e.file,n=void 0===t?{}:t,a=c.a.useState(null),r=Object(d.a)(a,2),o=r[0],l=r[1],u=n.id,p=n.mimetype,b=void 0===p?"":p,h=n.name,j=n.url_private,x=q(),g=function(){if(!o)return null;var e=o.contentType,t=o.data,n=o.isBase64,a=void 0!==n&&n;return e.search(/image/)>-1?Object(m.jsx)("a",{id:u,className:x.fileBox,style:{padding:0},href:t,download:a?h:null,target:a?null:"_blank",rel:a?null:"noopener noreferrer",children:Object(m.jsx)("img",{src:t,className:x.attachmentImage},"image-".concat(u))},u):Object(m.jsxs)("a",{id:u,className:x.fileBox,href:t,download:a?h:null,target:a?null:"_blank",rel:a?null:"noopener noreferrer",children:[Object(m.jsx)(X.a,{style:{paddingRight:8}})," ",h]},u)};return c.a.useEffect((function(){Object(s.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={contentType:b,data:j,isBase64:!1},e.next=3,Object(f.b)(u);case 3:(n=e.sent)&&(t={contentType:n.contentType,data:n.data,isBase64:!0}),l(t);case 6:case"end":return e.stop()}}),e)})))()}),[u]),Object(m.jsx)(g,{})}var J=Object(u.a)((function(e){return{reactionBox:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:8,paddingTop:8},undefinedIcon:{color:"#2c3e50"},reactionLabel:{backgroundColor:"#eee",padding:"2px 8px",borderRadius:16,display:"flex",alignItems:"center",gap:8},reactionCount:{fontSize:11},bigIcon:{width:48,height:48,display:"flex",justifyContent:"center",alignItems:"center",fontSize:40,backgroundColor:"#fff",borderRadius:2,margin:"8px auto"},description:{fontSize:13,"& span":{opacity:.65}}}}));function G(e){var t=J(),n=e.users,a=void 0===n?[]:n,c=e.reactions,r=void 0===c?[]:c,o=Object(m.jsx)("i",{className:"far fa-question-circle ".concat(t.undefinedIcon)});return Object(m.jsx)("div",{className:t.reactionBox,children:r.map((function(e){var n=e.name,c=e.count,r=e.users,i=":".concat(n,":"),s=Object(f.a)(i),l="undefined"===s?o:s,d=r.map((function(e){var t=a.find((function(t){return t.id===e}));return(null===t||void 0===t?void 0:t.real_name)||(null===t||void 0===t?void 0:t.name)||null})).join(", ");return Object(m.jsx)(N.a,{title:Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:t.bigIcon,children:l}),Object(m.jsxs)("span",{className:t.description,children:[d,Object(m.jsx)("span",{children:" reacted with ".concat(i)})]})]}),arrow:!0,children:Object(m.jsxs)("div",{className:t.reactionLabel,children:[Object(m.jsx)("span",{children:l}),Object(m.jsx)("span",{className:t.reactionCount,children:c})]})})}))})}var Z=n(212),K=n(111),Q=n(59),ee=n.n(Q),te=["node"],ne=Object(u.a)((function(e){return{root:{height:"100vh",overflowY:"auto",flex:1},logPannelTitle:{fontSize:18,padding:"12px 16px",borderBottom:"solid 1px #ddd",position:"sticky",top:0,zIndex:1,backgroundColor:"#fff"},List:{alignItems:"flex-start"},logBox:{display:"flex",flexDirection:"column"},logHead:{display:"flex",alignItems:"flex-end"},logUser:{fontWeight:600,fontSize:14,paddingRight:8},logDate:{fontSize:12,opacity:.65},logText:{fontSize:14,padding:"4px 0",wordBreak:"break-all",whiteSpace:"pre-line","& *":{fontSize:14},"& p":{margin:0},"& a":{color:"#3173ac",textDecoration:"none"},"& code":{backgroundColor:"#eee",border:"solid 1px #ddd",padding:"2px 4px",color:"#e01e5a",borderRadius:2,fontSize:12},"& pre":{"& code":{display:"block",padding:"4px 8px",borderRadius:4,color:"rgba(0,0,0,0.85)",overflowX:"auto"}},"& ul,& ol":{whiteSpace:"normal",margin:0,padding:"0 0 0 16px"}},attachments:{display:"flex",flexWrap:"wrap",alignItems:"flex-end",gap:8},threadLink:{display:"flex",alignItems:"center",gap:4,textDecoration:"none",color:"#1164A3",paddingTop:8},threadLinkText:{fontSize:13,fontWeight:600},logToolBox:{position:"relative"},mentionLink:{textDecoration:"none",fontStyle:"normal",backgroundColor:"#f2c74466",fontWeight:600,padding:"1px 2px",borderRadius:2}}}));function ae(e){var t=e.users,n=e.user,a=e.log,r=e.isThread,o=void 0!==r&&r,i=e.dateFormat,s=void 0===i?"LT":i,d=e.channelId,u=Object(p.i)(),b=u.workSpace,h=(u.appType,u.logId,ne()),j=function(e){var a=e.log,c=(a.user,a.ts),r=a.text,i=a.customText,u=a.files,p=void 0===u?[]:u,j=a.reply_count,x=void 0===j?0:j,g=a.reply_users,O=void 0===g?[]:g,y=a.reactions,w=void 0===y?[]:y,k=(null===a||void 0===a?void 0:a.client_msg_id)||"".concat(a.user,":").concat(a.ts),S=ee()(1e3*c).format(s),I=n||{name:"Slackbot"},N=I.name,C=I.real_name||N,T=function(e){var n=new RegExp(/^<!|>$/gi),a=["@here","@channel"],c=[{key:"\\*(.+)?\\*",replacer:function(e,t){return"**".concat(t,"**")}},{key:"\\_(.+)?\\_",replacer:function(e,t){return"*".concat(t,"*")}},{key:"\\~(.+)?\\~",replacer:function(e,t){return"~~".concat(t,"~~")}},{key:"\\<(.*)?\\|(.*)?\\>",replacer:function(e,t,n){return"[".concat(n,"](").concat(t,")")}},{key:"\u2022\\s(.*)?\\n",replacer:function(e,t){return"* ".concat(t,"\n")}},{key:"`{3}",replacer:"\n```"},{key:"\\&gt;s",replacer:"> "},{key:"<!here>",replacer:function(e){return"**@".concat(e.replace(n,""),"**")}},{key:"<!channel>",replacer:function(e){return"**@".concat(e.replace(n,""),"**")}},{key:"<!subteam.+?\\|@.+?>",replacer:function(e){var t,n=((null===(t=e.split("|"))||void 0===t?void 0:t[1])||"undefined").replace(/>$/,"");return a.includes(n)||a.push(n),"**".concat(n,"**")}}];return c.forEach((function(t){var n=t.key,a=t.replacer,c=new RegExp(n,"gi");e=e.replace(c,a)})),t.forEach((function(t){var n=new RegExp("<@".concat(t.id,">"),"gi"),c=t.real_name||t.name;a.includes("@".concat(c))||a.push("@".concat(c)),e=e.replace(n,"**@".concat(c,"**"))})),e=Object(f.a)(e)}(r||i),B=["@here","@channel"].concat(t.map((function(e){return"@".concat(e.real_name||e.name)}))),L=Boolean(w.length);return Object(m.jsxs)("div",{className:h.logBox,children:[Object(m.jsxs)("div",{className:h.logHead,children:[Object(m.jsx)(v.a,{className:h.logUser,children:C}),Object(m.jsx)(v.a,{className:h.logDate,children:S})]}),Object(m.jsx)("div",{className:h.logText,children:Object(m.jsx)(Z.a,{remarkPlugins:[[K.a,{singleTilde:!1}]],children:T,components:{strong:function(e){e.node;var t=Object(M.a)(e,te),n=function(e){return Boolean(e.children.filter((function(e){return B.includes(e)})).length)}(t),a=n?h.mentionLink:null;return Object(m.jsx)("strong",Object(l.a)({className:a},t))}}})}),Object(m.jsxs)("div",{className:h.logToolBox,children:[Object(m.jsx)("div",{className:h.attachments,children:p.map((function(e){return Object(m.jsx)($,{file:e})}))}),L&&Object(m.jsx)(G,{users:t,reactions:w}),!o&&Object(m.jsxs)(P.b,{className:h.threadLink,to:"/".concat(b,"/log/").concat(d,"/").concat(k),children:[O.map((function(e){t.find((function(t){return t.id===e}));return Object(m.jsx)(V,{users:t,id:e,size:24})})),x>0&&Object(m.jsxs)(v.a,{className:h.threadLinkText,children:[x," replie",x>1?"s":null]})]})]})]})},x=c.a.useCallback((function(e){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(V,{users:t,id:(null===n||void 0===n?void 0:n.id)||null}),Object(m.jsx)(w.a,{primary:Object(m.jsx)(j,{log:a})})]})}),[a]);return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(x,{})})}var ce=Object(u.a)((function(e){return{root:{flex:1,overflow:"hidden"},logPannelTitle:{width:"calc(100vw - 240px)",fontSize:18,padding:"12px 16px",borderBottom:"solid 1px #ddd",backgroundColor:"#fff"},list:{height:"calc(100vh - (60px + 28px))",overflowX:"hidden",overflowY:"auto",paddingTop:28},List:{alignItems:"flex-start"},logBox:{display:"flex",flexDirection:"column"},logHead:{display:"flex",alignItems:"flex-end"},logUser:{fontWeight:600,fontSize:14,paddingRight:8},logDate:{fontSize:12,opacity:.65},logText:{fontSize:14,padding:"4px 0"},attachmentImage:{maxHeight:240,borderRadius:4},fileBox:{display:"flex",alignItems:"center",textDecoration:"none",color:"#34495e",border:"solid 1px #ddd",borderRadius:4,padding:8,paddingRight:12},attachments:{display:"flex",flexWrap:"wrap",gap:8},dateDivider:{display:"flex",alignItems:"center",marginBottom:-18,marginTop:8,"& hr":{flex:1}},dateDividerLabelBox:{position:"sticky",top:-20,display:"flex",justifyContent:"center",zIndex:1,marginBottom:24},dateDividerLabel:{border:"solid 1px rgba(0,0,0,0.12)",fontSize:13,fontWeight:500,padding:"6px 12px",borderRadius:18,backgroundColor:"#fff",position:"absolute"}}}));function re(e){var t=e.slackData,n=Object(p.i)(),a=n.channelId,r=void 0===a?null:a,o=(n.logId,Object(p.h)()),i=ce(),s=c.a.useState([]),l=Object(d.a)(s,2),u=l[0],f=l[1],b=t.setting.users,h=t.setting.channels.find((function(e){return e.id===r})),j=(null===h||void 0===h?void 0:h.name)||null,x=function e(t){var n=document.getElementById("".concat(t));n?setTimeout((function(){n.scrollIntoView({behavior:"smooth"})}),1e3):setTimeout((function(){e(t)}),750)},g=function(e){var t=e.date;return Object(m.jsxs)(c.a.Fragment,{children:[Object(m.jsx)("div",{className:i.dateDivider,children:Object(m.jsx)(D.a,{})}),Object(m.jsx)("div",{className:i.dateDividerLabelBox,children:Object(m.jsx)(v.a,{className:i.dateDividerLabel,children:t})})]},"log-date-title-".concat(r,"-").concat(t))};c.a.useEffect((function(){f(t.channels[j])}),[r]),c.a.useEffect((function(){var e=new URLSearchParams(o.search).get("client_msg_id");e&&x(e)}),[o.search]);var w=[];return j&&Object(m.jsxs)("div",{className:i.root,children:[Object(m.jsxs)(v.a,{className:i.logPannelTitle,children:["# ",j]}),Object(m.jsx)(O.a,{id:"contant",className:i.list,dense:!0,component:"nav",children:Object.keys(u).sort((function(e,t){return e>t?1:-1})).map((function(e){u[e].forEach((function(e){((null===e||void 0===e?void 0:e.replies)||[]).forEach((function(e){return w.push("".concat(e.user,":").concat(e.ts))}))}));var t=u[e].filter((function(e){return e.subtype||!w.includes("".concat(e.user,":").concat(e.ts))})).filter((function(e){return e.text})).sort((function(e,t){return e.ts-t.ts})),n=Boolean(t.length);return Object(m.jsxs)(c.a.Fragment,{children:[n&&Object(m.jsx)(g,{date:e}),t.map((function(e){var t=e.user,n=e.client_msg_id,a=b.find((function(e){return e.id===t}));return Object(m.jsx)(y.a,{id:n,className:i.List,children:Object(m.jsx)(ae,{users:b,user:a,log:e,channelId:r})},n)}))]},"log-date-box-".concat(r,"-").concat(e))}))})]},"log-".concat(r))}var oe=n(110),ie=n.n(oe),se=Object(u.a)((function(e){return{root:function(e){return{height:"100vh",maxWidth:e.threadWidth,minWidth:e.threadWidth,overflowX:"hidden",overflowY:"auto",flex:1,scrollMarginTop:"56px",borderLeft:"solid 1px #ddd"}},logPannelTitle:{fontSize:18,padding:"8px 16px 7px 16px",borderBottom:"solid 1px #ddd",display:"flex",justifyContent:"space-between",alignItems:"center",zIndex:1,backgroundColor:"#fff",borderLeft:"solid 1px #ddd",marginLeft:-1,"& small":{opacity:.5}},logPannelTitleLabel:{display:"flex",gap:12,alignItems:"center"},list:{height:"calc(100vh - (52px + 16px))",overflowX:"hidden",overflowY:"auto"},List:{alignItems:"flex-start"},logBox:{display:"flex",flexDirection:"column"},logHead:{display:"flex",alignItems:"flex-end"},logUser:{fontWeight:600,fontSize:14,paddingRight:8},logDate:{fontSize:12,opacity:.65},logText:{fontSize:14,padding:"4px 0"},attachmentImage:{maxHeight:240,borderRadius:4},fileBox:{display:"flex",alignItems:"center",textDecoration:"none",color:"#34495e",border:"solid 1px #ddd",borderRadius:4,padding:8,paddingRight:12},attachments:{display:"flex",flexWrap:"wrap",gap:8},dateDivider:{display:"flex",alignItems:"center",marginBottom:-18,"& hr":{flex:1}},dateDividerLabelBox:{position:"sticky",top:58,display:"flex",justifyContent:"center",zIndex:1},dateDividerLabel:{border:"solid 1px rgba(0,0,0,0.12)",fontSize:13,fontWeight:500,padding:"6px 12px",borderRadius:18,backgroundColor:"#fff"},replieBox:{display:"flex",alignItems:"center",gap:8,textDecoration:"none",padding:"0 12px","& hr":{flex:1}},replieLabel:{opacity:.5,fontSize:13},closeButton:{minWidth:48}}}));function le(e){var t=e.slackData,n=e.threadWidth,a=e.threadId,r=Object(p.i)(),o=r.workSpace,i=r.appType,s=r.channelId,l=void 0===s?null:s,d=r.logId,u=void 0===d?null:d,f=se({threadWidth:n}),h=Object(p.g)(),j=t.setting.users,x=t.setting.channels.find((function(e){return e.id===l})),g=(null===x||void 0===x?void 0:x.name)||null,w=t.channels[g],k="YYYY-MM-DD LT",S=[],I=null,N=[],C=Boolean(u.search(/\:/)>-1);Object.keys(w||{}).forEach((function(e){var t=w[e].find((function(e){return C?"".concat(e.user,":").concat(e.ts)===u:e.client_msg_id===u}))||null;t&&(N=(null===t||void 0===t?void 0:t.replies)||[],I=t),S=S.concat(w[e])}));var T=S.filter((function(e){var t=e.ts,n=e.user;return Boolean(N.find((function(e){return e.ts===t&&e.user===n})))})),B=I||{},L=B.client_msg_id,z=B.user,W="thread-".concat(L),R=j.find((function(e){return e.id===z})),_=function e(){var t=document.getElementById("".concat(u));t?document.querySelector("#".concat(a)).scrollTop=t.offsetTop:setTimeout((function(){e()}),750)};return c.a.useEffect((function(){u&&_()}),[u]),g&&Object(m.jsxs)("div",{id:a,className:f.root,children:[Object(m.jsxs)(v.a,{className:f.logPannelTitle,component:"div",children:[Object(m.jsxs)("div",{className:f.logPannelTitleLabel,children:["Thread",Object(m.jsxs)("small",{children:["# ",g]})]}),Object(m.jsx)(b.a,{className:f.closeButton,onClick:function(){h.push("/".concat(o,"/").concat(i,"/").concat(l))},children:Object(m.jsx)(ie.a,{})})]}),Object(m.jsxs)(O.a,{className:f.list,dense:!0,component:"nav",children:[Object(m.jsx)(y.a,{id:W,className:f.List,children:Object(m.jsx)(ae,{users:j,user:R,log:I,isThread:!0,dateFormat:k})},W),Object(m.jsxs)("div",{className:f.replieBox,children:[Object(m.jsxs)(v.a,{className:f.replieLabel,children:[T.length," replie",T.length>1?"s":null]}),Object(m.jsx)(D.a,{})]}),T.sort((function(e,t){return e.ts-t.ts})).map((function(e){var t=e.user,n=e.client_msg_id,a=j.find((function(e){return e.id===t}));return a&&Object(m.jsx)(y.a,{id:n,className:f.List,children:Object(m.jsx)(ae,{users:j,user:a,log:e,dateFormat:k})},n)}))]})]},"thread-".concat(u))}var de=n(202),ue=n(214),pe=n(211),fe=Object(u.a)((function(e){return{root:{minHeight:52,display:"flex",alignItems:"flex-end","& .MuiTab-textColorPrimary.Mui-selected":{color:"#007a5a"},"& .MuiTabs-indicator":{backgroundColor:"#007a5a"}},tabBox:{padding:"0 24px"}}}));function be(e){var t=Object(p.i)(),n=t.workSpace,a=t.channelId,c=t.logId,r=void 0===c?null:c,o="messages"===a?0:1,i=Object(p.g)(),s=fe();return Object(m.jsx)(de.a,{className:s.root,square:!0,children:Object(m.jsx)("div",{className:s.tabBox,children:Object(m.jsxs)(ue.a,{value:o,indicatorColor:"primary",onChange:function(e,t){var a=0===t?"messages":"files",c="/".concat(n,"/search/").concat(a).concat(r?"/".concat(r):"");i.push(c)},children:[Object(m.jsx)(pe.a,{label:"Messages"}),Object(m.jsx)(pe.a,{label:"Files"})]})})})}var he=Object(u.a)((function(e){return{root:{height:"100vh",overflowY:"auto",flex:1,backgroundColor:"#eee"},searchBox:{margin:"12px 16px",display:"flex",alignItems:"center"},input:{border:"none",outline:"none",appearance:"none",padding:"8px",backgroundColor:"transparent",fontSize:18,flex:1},searchIcon:{marginLeft:8},listBox:{padding:"12px 16px",display:"flex",flexDirection:"column",gap:12},List:{padding:"8px 12px",cursor:"pointer"},listInner:{display:"flex",alignItems:"flex-start"},channelName:{opacity:.7,fontSize:14},shared:{fontSize:14,"& strong":{opacity:.85},"& span":{opacity:.7,fontSize:13}}}}));function je(e){var t=e.slackData,n=Object(p.i)(),a=n.workSpace,r=n.channelId,o=n.logId,i=void 0===o?"":o,s=he(),d=Object(p.g)(),u=t.setting.users,f="messages"===r?0:1,b=c.a.useRef(null),h=function(e,t,n){return function(){d.push("/".concat(a,"/log/").concat(e).concat(t?"/".concat(t):"","?client_msg_id=").concat(n))}},j=function(){if(""===i)return[[],[]];var e=[],n=[],a=new RegExp("".concat(i.toLowerCase())),c={},r=[],o=["bot_message"];return Object.keys(t.channels).forEach((function(i){var s=t.channels[i];Object.keys(s).forEach((function(s){var d=t.channels[i][s].filter((function(e){return!o.includes(e.subtype)}));d.filter((function(e){return e.replies})).forEach((function(e){return e.replies.map((function(t){var n="".concat(t.user,":").concat(t.ts),a=(null===e||void 0===e?void 0:e.client_msg_id)||"".concat(e.user,":").concat(e.ts);c[n]=a,r.push(n)}))})),d.forEach((function(o){var s=(o.text||"").toLowerCase(),d="".concat(o.user,":").concat(o.ts),u=r.includes(d);if(s.search(a)>-1){var p=t.setting.channels.find((function(e){return e.name===i})).id;e.push(Object(l.a)(Object(l.a)({},o),{},{channelName:i,channelId:p,threadId:u?c[d]:null}))}((null===o||void 0===o?void 0:o.files)||[]).forEach((function(e){if((e.name||"").toLowerCase().search(a)>-1){var r=t.setting.channels.find((function(e){return e.name===i})).id;n.push(Object(l.a)(Object(l.a)({},o),{},{file:Object(l.a)({},e),channelName:i,channelId:r,threadId:u?c[d]:null}))}}))}))}))})),[e,n]}()[f],x=Boolean(i&&0===j.length);return Object(m.jsxs)("div",{className:s.root,children:[Object(m.jsx)(be,{}),Object(m.jsxs)(de.a,{elevation:1,className:s.searchBox,component:"form",onSubmit:function(e){e.stopPropagation(),e.preventDefault();var t=b.current.value,n="/".concat(a,"/search/").concat(r).concat(t?"/".concat(t):"");return d.push(n),!1},children:[Object(m.jsx)(I.a,{className:s.searchIcon}),Object(m.jsx)("input",{ref:b,className:s.input,type:"text",placeholder:"Search Logs",defaultValue:i})]}),Object(m.jsxs)("div",{className:s.listBox,style:{flexDirection:f?"row":null,flexWrap:f?"wrap":null},children:[x&&Object(m.jsx)("div",{style:{padding:8},children:Object(m.jsxs)(v.a,{children:["No log matching the ",Object(m.jsx)("strong",{children:i})," exists...\ud83e\udd72"]})}),j.map((function(e,t){var n=e.user,a=e.client_msg_id,c=e.channelName,r=e.channelId,o=e.threadId,i=e.file;if(0===f){var l=u.find((function(e){return e.id===n}));return Object(m.jsxs)(de.a,{onClick:h(r,o,a),id:a,className:s.List,children:[Object(m.jsxs)(v.a,{className:s.channelName,children:["# ",c]}),Object(m.jsx)("div",{className:s.listInner,children:Object(m.jsx)(ae,{users:u,user:l,log:e,channelId:r})})]},"log-".concat(r,"-").concat(o,"-").concat(a,"-").concat(t))}var d=i.id,p=i.name,b=i.user,j=i.created,x=i.username,g=d||"".concat(e.user,":").concat(e.ts),O=u.find((function(e){return e.id===b}));void 0===O&&console.log({file:i});var y=(null===O||void 0===O?void 0:O.real_name)||(null===O||void 0===O?void 0:O.name)||x;return Object(m.jsxs)(de.a,{onClick:h(r,o,g),id:g,className:s.List,children:[Object(m.jsxs)(v.a,{className:s.shared,children:[Object(m.jsx)("strong",{children:p}),Object(m.jsx)("br",{}),Object(m.jsxs)("span",{children:["Shared by ",y," on ",ee()(1e3*j).format("MMM Do YYYY")]})]}),Object(m.jsx)($,{file:i})]},"image-".concat(r,"-").concat(o,"-").concat(g,"-").concat(t))}))]})]})}var me=Object(u.a)((function(e){return{root:{display:"flex"},menuResizeBar:{position:"fixed",top:0,bottom:0,width:6,backgroundColor:"#3498db",opacity:0,zIndex:2,transition:"opacity .2s linear",cursor:"col-resize","&:hover":{opacity:1}}}}));function xe(e){var t=e.slackData,n=e.currentWorkSpaces,a=e.searchValue,r=e.setSearchValue,o=e.moveImportPage,i=e.changeWorkSpace,s=c.a.useState(Number(window.localStorage.getItem("menuWidth")||240)),l=Object(d.a)(s,2),u=l[0],f=l[1],b=c.a.useState(Number(window.localStorage.getItem("threadWidth")||Math.ceil(window.innerWidth/3))),h=Object(d.a)(b,2),j=h[0],x=h[1],g=c.a.useState(!1),v=Object(d.a)(g,2),O=v[0],y=v[1],w=c.a.useState(null),k=Object(d.a)(w,2),S=k[0],I=k[1],N="menu-box",C="menu-resize-bar",T="thread-box",B="thread-resize-bar",L=Object(p.i)(),z=L.appType,D=(L.channelId,L.logId),W=void 0===D?null:D,R=me({menuWidth:u,selectable:O.current}),_=function(e,t){return function(n){if(e&&I(e),y(t),!t){var a=n.clientX;if("menu"===S&&(f(a),window.localStorage.setItem("menuWidth",a)),"thread"===S){var c=window.innerWidth-a;x(c),window.localStorage.setItem("threadWidth",c)}I(null)}}};return Object(m.jsxs)("div",{className:R.root,onMouseMove:function(e){if(O){var t=document.querySelector("#".concat("menu"===S?N:T)),n=document.querySelector("#".concat("menu"===S?C:B)),a="menu"===S?"left":"right";if(t&&n){var c="menu"===S?"".concat(e.clientX,"px"):"calc(100vw - ".concat(e.clientX,"px)");t.style.minWidth=c,t.style.maxWidth=c,n.style[a]="calc(".concat(c," - 3px)")}}},onMouseUp:_(null,!1),style:{userSelect:O?"none":null},children:[Object(m.jsx)(E,{currentWorkSpaces:n,slackData:t,searchValue:a,moveImportPage:o,changeWorkSpace:i,menuWidth:u,menuId:N}),"log"===z&&W&&Object(m.jsx)("div",{id:B,className:R.menuResizeBar,onMouseDown:_("thread",!0),style:{right:j-3}}),Object(m.jsx)("div",{id:C,className:R.menuResizeBar,onMouseDown:_("menu",!0),style:{left:u-3}}),"log"===z?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(re,{slackData:t}),W&&Object(m.jsx)(le,{threadId:T,threadWidth:j,slackData:t})]}):Object(m.jsx)(je,{slackData:t,searchValue:a,setSearchValue:r})]})}var ge=Object(u.a)((function(e){return{}}));function ve(){var e=ge(),t=Object(p.g)(),n=c.a.useState(!1),a=Object(d.a)(n,2),r=a[0],o=a[1],u=c.a.useState({}),b=Object(d.a)(u,2),h=b[0],j=b[1],x=c.a.useState(null),v=Object(d.a)(x,2),O=v[0],y=v[1],w=c.a.useState(""),k=Object(d.a)(w,2),S=k[0],I=k[1],N=c.a.useState(!0),C=Object(d.a)(N,2),T=C[0],B=C[1],L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(l.a)(Object(l.a)({},h),e),a=n[t];y(Object(l.a)({},a)),j(n)},z=function(e){L(h,e)},D=function(){y(null)};return c.a.useEffect((function(){!function(e){var n;if(e){var a=e.workSpace,c=(null===(n=e.setting.channels.find((function(e){return"general"===e.name})))||void 0===n?void 0:n.id)||null;t.push("/".concat(encodeURIComponent(a),"/log/").concat(c))}}(O)}),[O]),c.a.useEffect((function(){Object(s.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.c)();case 2:return t=e.sent,(n=Object.keys(t)).length&&L(t,n[0]),e.next=7,fetch("https://line-2f7e0.web.app/img/logo.png").then((function(e){return!1})).catch((function(e){return!0}));case 7:a=e.sent,B(a),o(!0);case 10:case"end":return e.stop()}}),e)})))()}),[]),Object(m.jsxs)("div",{className:e.root,children:[O?Object(m.jsx)(p.d,{children:Object(m.jsx)(p.b,{path:["/:workSpace/:appType/:channelId/:logId","/:workSpace/:appType/:channelId","/:workSpace/:appType"],render:function(e){return Object(m.jsx)(xe,{isCors:T,currentWorkSpaces:h,slackData:O,searchValue:S,setSearchValue:I,moveImportPage:D,changeWorkSpace:z})}})}):Object(m.jsx)(p.a,{to:"/import"}),Object(m.jsx)(p.d,{children:Object(m.jsx)(p.b,{path:"/import",render:function(e){return Object(m.jsx)(g,{initComplete:r,isCors:T,changeSlackData:L})}})})]})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(m.jsx)(P.a,{children:Object(m.jsx)(ve,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},27:function(e,t,n){"use strict";(function(e){n.d(t,"e",(function(){return j})),n.d(t,"d",(function(){return O})),n.d(t,"b",(function(){return w})),n.d(t,"c",(function(){return y})),n.d(t,"a",(function(){return k}));var a=n(8),c=n(21),r=n(34),o=n(6),i=n(13),s=n(100),l=n.n(s),d=n(101),u=(n(59),n(102)),p=n(103),f=n.n(p),b=n(112),h=new u.a("slackViewerDB");h.version(1).stores({store:"&id"});var j=function(t,n){var a,c=(null===(a=t.target.files)||void 0===a?void 0:a[0])||null;if(c){var r=c.name.replace(/\sSlack\sexport.*zip$/,""),s=new FileReader;s.onload=function(t){var a=t.target.result,c=new Uint8Array(a),s=new d.Zlib.Unzip(c),u=s.getFilenames(),p={setting:{},channels:{},workSpace:r};u.forEach((function(t){var n=l.a.convert(t,"UNICODE","AUTO");if("/"!==t.slice(-1)){var a=s.decompress(t),c=e.from(a).toString("utf8"),r=JSON.parse(c),o=n.split("/");if(o.length>1){var d=Object(i.a)(o,2),u=d[0],f=d[1].replace(".json","");void 0===p.channels[u]&&(p.channels[u]={}),p.channels[u][f]=r}else p.setting[n.replace(".json","")]=r}})),n(Object(o.a)({},r,p),r)},s.readAsArrayBuffer(c)}else alert("Please select a zip file")},m=function(e){return new Promise((function(t,n){var a=new FileReader;a.onerror=n,a.onload=function(){t(a.result)},a.readAsDataURL(e)}))},x=function(){var e=Object(r.a)(Object(c.a)().mark((function e(t){var n,a,r,o,i,s,l;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,a=t.url,r=!1,e.next=4,fetch(a).then((function(e){if(200===e.status)return e.blob().then((function(t){return{contentType:e.headers.get("Content-Type"),blob:t}}));throw new Error("File does not exist")})).catch((function(e){return console.error(e),null}));case 4:if(!(o=e.sent)){e.next=12;break}return i=o.blob,s=o.contentType,e.next=9,m(i);case 9:l=e.sent,h.store.put({id:n,contentType:s,data:l}),r=!0;case 12:return e.abrupt("return",{id:n,successfulToSave:r});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(e){return Object.keys(e).flatMap((function(t){return Object.keys(e[t]).flatMap((function(n){return e[t][n].filter((function(e){return e.files})).flatMap((function(e){return e.files.map((function(e){return{id:e.id,url:e.url_private}}))}))}))}))},v=function(e){return e.flatMap((function(e){var t=e.id,n=e.profile,a=n.image_24,c=n.image_48;return[{id:"".concat(t,"-image_24"),url:a},{id:"".concat(t,"-image_48"),url:c}]}))},O=function(){var e=Object(r.a)(Object(c.a)().mark((function e(t,n){var o,i,s,l,d,u;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:return(o=e.sent)[t.workSpace]=Object(a.a)({},t),i={id:"workSpaces",data:o},h.store.put(i),s=g(t.channels),l=v(t.setting.users),d=l.concat(s),e.next=11,Promise.all(d.map(function(){var e=Object(r.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:u=e.sent,n(u);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(r.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("workSpaces");case 2:return t=e.sent,e.abrupt("return",(null===t||void 0===t?void 0:t.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(r.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.store.get(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=(b.a().map((function(e){return Object(a.a)(Object(a.a)({},e),{},{slack:e.description.replace(/\s/gi,"").toLowerCase()})})),function(e){return e.replace(/:(.*)?:/gi,(function(e,t){return f.a.getUnicode(e)||void 0}))})}).call(this,n(129).Buffer)}},[[155,1,2]]]);